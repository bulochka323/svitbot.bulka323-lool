# üîå Poweroutage Telegram Bot

–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –±–æ—Ç –¥–ª—è –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó —Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≥—Ä–∞—Ñ—ñ–∫—ñ–≤ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –µ–ª–µ–∫—Ç—Ä–æ–µ–Ω–µ—Ä–≥—ñ—ó —É Telegram-–∫–∞–Ω–∞–ª.

## ‚ú® –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—è** ‚Äî —â–æ–¥–Ω—è –≤ –æ–¥–∏–Ω —á–∞—Å  
‚úÖ **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –∑–º—ñ–Ω** ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–∂–Ω—ñ 15-30 —Ö–≤–∏–ª–∏–Ω  
‚úÖ **–í–∏–¥—ñ–ª–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö –∑–º—ñ–Ω** ‚Äî –ø–æ–∫–∞–∑—É—î, —â–æ —Å–∞–º–µ –∑–º—ñ–Ω–∏–ª–æ—Å—å  
‚úÖ **–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—ó** ‚Äî SQLite –±–∞–∑–∞ –¥–∞–Ω–∏—Ö  
‚úÖ **–û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –ø–æ–≤—Ç–æ—Ä–Ω—ñ —Å–ø—Ä–æ–±–∏  
‚úÖ **–õ–æ–≥—É–≤–∞–Ω–Ω—è** ‚Äî –¥–µ—Ç–∞–ª—å–Ω—ñ –∂—É—Ä–Ω–∞–ª–∏ —Ä–æ–±–æ—Ç–∏  

---

## üöÄ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –∑–∞–ø—É—Å–∫

### 1Ô∏è‚É£ –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
```bash
git clone https://github.com/bulochka323/poweroutage-bot.git
cd poweroutage-bot
```

### 2Ô∏è‚É£ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ—Ç–æ—á–µ–Ω–Ω—è
```bash
# –ù–∞ Linux/Mac
python3 -m venv venv
source venv/bin/activate

# –ù–∞ Windows
python -m venv venv
venv\Scripts\activate
```

### 3Ô∏è‚É£ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```

### 4Ô∏è‚É£ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–æ—Ç–∞

–í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ —Ñ–∞–π–ª `config.py`:

```python
BOT_TOKEN = "–í–ê–®_–¢–û–ö–ï–ù_–í–Ü–î_BOTFATHER"  # https://t.me/botfather
CHANNEL_ID = -1001234567890            # ID –∞–±–æ username –∫–∞–Ω–∞–ª—É
SCHEDULE_URL = "https://..."           # –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –≥—Ä–∞—Ñ—ñ–∫
COMPANY_NAME = "–û–±–ª–µ–Ω–µ—Ä–≥–æ"
PUBLISH_TIME = "07:00"                 # –ß–∞—Å —Ä–∞–Ω–∫–æ–≤–æ—ó –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó
UPDATE_INTERVAL_MIN = 15               # –Ü–Ω—Ç–µ—Ä–≤–∞–ª –ø–µ—Ä–µ–≤—ñ—Ä–æ–∫ (—Ö–≤–∏–ª–∏–Ω)
```

### 5Ô∏è‚É£ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
```bash
python bot.py
```

---

## üìã –§–∞–π–ª–∏ –ø—Ä–æ–µ–∫—Ç—É

| –§–∞–π–ª | –û–ø–∏—Å |
|------|------|
| `bot.py` | –¢–æ—á–∫–∞ –∑–∞–ø—É—Å–∫—É –±–æ—Ç–∞ |
| `config.py` | –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è (—Ç–æ–∫–µ–Ω, –∫–∞–Ω–∞–ª, URL) |
| `parser.py` | –ü–∞—Ä—Å–∏–Ω–≥ HTML/JSON –∑ –≥—Ä–∞—Ñ—ñ–∫–æ–º |
| `formatter.py` | –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –¥–ª—è Telegram |
| `scheduler.py` | –ü–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫ –∑–∞–¥–∞—á (—Ä–∞–Ω–∫–æ–≤–∞ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—è, –ø–µ—Ä—ñ–æ–¥–∏—á–Ω—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏) |
| `storage.py` | SQLite –±–∞–∑–∞ –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≥—Ä–∞—Ñ—ñ–∫—ñ–≤ |
| `requirements.txt` | –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ Python |

---

## üîß –Ø–∫ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –ø–∞—Ä—Å–µ—Ä –ø—ñ–¥ –≤–∞—à —Å–∞–π—Ç

–£ —Ñ–∞–π–ª—ñ `parser.py` –∑–º—ñ–Ω—ñ—Ç—å —Ñ—É–Ω–∫—Ü—ñ—é `parse_schedule_html()`:

### –ü—Ä–∏–∫–ª–∞–¥ –¥–ª—è JSON API:
```python
def parse_schedule_html(html: str):
    import json
    data = json.loads(html)
    schedule = "\n".join([f"–ß–µ—Ä–≥–∞ {q}: {t}" for q, t in data["queues"].items()])
    return {
        "date": data["date"],
        "schedule_text": schedule,
        "last_updated": data.get("updated", "")
    }
```

### –ü—Ä–∏–∫–ª–∞–¥ –¥–ª—è HTML-—Ç–∞–±–ª–∏—Ü—ñ:
```python
def parse_schedule_html(html: str):
    soup = BeautifulSoup(html, "html.parser")
    table = soup.find("table")
    rows = table.find_all("tr")[1:]
    schedule = ""
    for row in rows:
        cells = [td.text.strip() for td in row.find_all("td")]
        schedule += f"{cells[0]}: {cells[1]}\n"
    return {
        "date": datetime.date.today().isoformat(),
        "schedule_text": schedule.strip(),
        "last_updated": ""
    }
```

---

## üìß –ü—Ä–∏–∫–ª–∞–¥ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ –∫–∞–Ω–∞–ª

```
üîå –ì—Ä–∞—Ñ—ñ–∫ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å –Ω–∞ 01.02.2026

–ß–µ—Ä–≥–∞ 1: 08:00 ‚Äì 12:00
–ß–µ—Ä–≥–∞ 2: 12:00 ‚Äì 16:00
–ß–µ—Ä–≥–∞ 3: 16:00 ‚Äì 20:00

üìå –î–∂–µ—Ä–µ–ª–æ: –û–±–ª–µ–Ω–µ—Ä–≥–æ
‚è∞ –û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è: 06:45
```

### –ü—Ä–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—ñ:
```
‚ö†Ô∏è –û–Ω–æ–≤–ª–µ–Ω–æ –≥—Ä–∞—Ñ—ñ–∫ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å

üîå –ì—Ä–∞—Ñ—ñ–∫ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å –Ω–∞ 01.02.2026

–ß–µ—Ä–≥–∞ 1: 09:00 ‚Äì 13:00
–ß–µ—Ä–≥–∞ 2: 13:00 ‚Äì 17:00
–ß–µ—Ä–≥–∞ 3: 17:00 ‚Äì 21:00

üìù –©–æ —Å–∞–º–µ –∑–º—ñ–Ω–∏–ª–æ—Å—å:
–ß–µ—Ä–≥–∞ 1: 09:00 ‚Äì 13:00
–ß–µ—Ä–≥–∞ 3: 17:00 ‚Äì 21:00

üìå –î–∂–µ—Ä–µ–ª–æ: –û–±–ª–µ–Ω–µ—Ä–≥–æ
‚è∞ –û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è: 10:15
```

---

## üêõ –†–æ–∑–≤'—è–∑–∞–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

### –ü–æ–º–∏–ª–∫–∞: "–ù–µ –≤–¥–∞–ª–æ—Å—è –æ—Ç—Ä–∏–º–∞—Ç–∏ –≥—Ä–∞—Ñ—ñ–∫"
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –≤—ñ—Ä–Ω–æ –≤–∫–∞–∑–∞–Ω–∞ `SCHEDULE_URL` –≤ `config.py`
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ —Å–∞–π—Ç –¥–æ—Å—Ç—É–ø–Ω–∏–π –≤ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—ñ
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏: –±–æ—Ç –±—É–¥–µ –ø–∏—Å–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ —Å–ø—Ä–æ–± –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

### –ü–æ–º–∏–ª–∫–∞: "–ù–µvalid–Ω—ã–π —Ç–æ–∫–µ–Ω"
- –ü–µ—Ä–µ–π–¥—ñ—Ç—å —É [@BotFather](https://t.me/botfather)
- –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π –±–æ—Ç –∫–æ–º–∞–Ω–¥–æ—é `/newbot`
- –°–∫–æ–ø—ñ—é–π—Ç–µ —Ç–æ–∫–µ–Ω —É `config.py`

### –ü–æ–º–∏–ª–∫–∞: "CHANNEL_ID –Ω–µ –≤—ñ—Ä–Ω–∏–π"
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ —Ü–µ ID –∫–∞–Ω–∞–ª—É (—á–∏—Å–ª–æ, –ø–æ—á–∏–Ω–∞—é—á–∏ –∑ `-100`)
- –ê–±–æ –≤–∫–∞–∂—ñ—Ç—å username –∫–∞–Ω–∞–ª—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: `@my_channel`)

---

## üìù Licenseence

MIT

---

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤–∏–π –¥–æ –∑–∞–ø—É—Å–∫—É! –£–¥–∞—á–∏! üöÄ**